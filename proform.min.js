var ProForm=(function(){BROWSER_SUCKS=(function(){var e;var d="ProFormTestValue";var b=document.documentElement;var c=document.createElement("input");c.setAttribute("name","test_radio");c.setAttribute("id","test_radio");c.setAttribute("value",d);c.setAttribute("type","radio");b.appendChild(c);e=b.removeChild(c);return !(e.value===d)})();var a=Class.create({});a.Version="0.11.1";a.options={labelMaker:function(b){return b.gsub("_"," ").ucwords()+": "}};a.prototype={initialize:function(d,b,c){this.attr=Object.extend({id:d,action:"",method:"post"},b||{});this.options={};Object.extend(this.options,a.options);Object.extend(this.options,c||{});this.form=new Element("form",this.attr);this.id=this.attr.id;this.set=false;this.ieSux=$H()},get:function(){return this.form},insert:function(b){$(b).insert(this.form);if(BROWSER_SUCKS){var c;this.ieSux.each(function(d){c=$(d.key);for(x in d.value){c[x]=d.value[x]}})}return this.form},request:function(b){this.sentRequest=this.form.request(b);return this},add:function(b){this.form.insert(b);return this},hidden:function(b,c){this.form.insert(this._input("hidden",b,{value:c,label:false}));return this},text:function(c,b){if(Object.isString(b)){var b={value:b}}this._insert(this._input("text",c,b));return this},checkbox:function(c,d,b){var c=c+"[]";var b;if(Object.isString(d)){b=Object.extend({id:d,value:d},b||{})}else{if(Object.isArray(d)){c=c.gsub("[]","");for(i=0;i<d.length;i++){if(Object.isString(d[i])){this.checkbox(c,d[i])}else{for(x in d[i]){this.checkbox(c,x,{checked:d[i][x]})}}}return this}else{b=Object.extend(d,b||{})}}this._insert(this._input("checkbox",c,b));return this},radio:function(c,d,b){var b;if(Object.isString(d)){b=Object.extend({id:d,value:d},b||{})}else{if(Object.isArray(d)){for(i=0;i<d.length;i++){this.radio(c,d[i],b)}return this}else{b=Object.extend(d,b||{})}}this._insert(this._input("radio",c,b));return this},textarea:function(d,b){var b;var e;if(Object.isString(b)){e=b;b=this._buildAttr(d,{})}else{b=this._buildAttr(d,b);e=b.value;delete b.value}var c=new Element("textarea",b);this._insert(c.setValue(e));return this},select:function(e,d,c){var c=this._buildAttr(e,c);delete c.value;var b=new Element("select",c);var f=this._buildOptions(d);for(i=0;i<f.length;i++){b.insert(f[i])}this._insert(b);return this},submit:function(c,b){var c=c||"submit";this._insert(this._input("submit",c,this._buildButton(c,b)));return this},reset:function(c,b){var c=c||"reset";this._insert(this._input("reset",c,this._buildButton(c,b)));return this},button:function(c,b){this._insert(this._input("button",c,this._buildButton(c,b)));return this},fieldset:function(d,b){if(d===false){this.form.insert(this.set);this.set=false;return this}this.set=new Element("fieldset",b||{});var c=new Element("legend");this.set.insert(c.update(d));return this},_buildButton:function(c,b){var d;if(Object.isUndefined(b)){d={label:false,value:c.ucwords()}}else{if(Object.isString(b)){d={value:b,label:false}}else{d=Object.extend({label:false,value:c.ucwords()},b||{})}}return d},_buildAttr:function(d,b){var b=Object.extend({id:this.id+"_"+d,name:d,value:"",label:true},b||{});var c=b.label;delete b.label;if(c){this._label(b.id.sub(this.id+"_",""),c)}return b},_buildOptions:function(c){var f=[];var e;if(Object.isArray(c)){for(i=0;i<c.length;i++){if(typeof c[i]!="object"){f.push(this._option(c[i]))}else{e=this._buildOptions(c[i]);for(o=0;o<e.length;o++){f.push(e[o])}}}}else{if(Object.isUndefined(c.optGroup)){for(x in c){f.push(this._option(x,c[x]))}}else{var b=Object.extend({label:c.optGroup},c.attr||{});var d=new Element("optgroup",b);e=this._buildOptions(c.options);for(g=0;g<e.length;g++){d.insert(e[g])}f.push(d)}}return f},_option:function(d,b){var c;if(Object.isUndefined(b)){c={value:d}}else{if(Object.isArray(b)){c={value:b[0],selected:b[1]}}else{if(typeof b==="object"){c=b}else{if(typeof b==="boolean"){c={value:d,selected:b}}else{c={value:b}}}}}var e=new Element("option",c||{});return e.update(d)},_input:function(e,d,b){var b=this._buildAttr(d,Object.extend({type:e},b||{}));if(BROWSER_SUCKS){var e,d,h,f;e=b.type;delete b.type;d=b.name;delete b.name;h=b.id;delete b.id;f=b.value;delete b.value;this.ieSux.set(h,b);var c=document.createElement('<input type="'+e+'" name="'+d+'" id="'+h+'" value="'+f+'" />')}else{var c=new Element("input",b)}return c},_label:function(d,c){if(c===true){var c=this.options.labelMaker(d)}var b=new Element("label",{"for":d});b.update(c);this._insert(b)},_insert:function(b){if(this.set){this.set.insert(b)}else{this.form.insert(b)}}};return a})();if(!Object.isFunction("ucwords")){Object.extend(String.prototype,(function(){function a(){var b=this;return(b+"").replace(/^(.)|\s(.)/g,function(c){return c.toUpperCase()})}return{ucwords:a}})())};